apiVersion: scaffolder.backstage.io/v1beta3
kind: Template
metadata:
  name: secrel-config-generator
  title: SecRel Configuration Generator
  description: Generates a config.yml for SecRel with language configurations
spec:
  owner: jnkansah-va
  type: service
  parameters:
    - title: Select Application Language
      required:
        - language
      properties:
        language:
          title: Select language
          type: string
          enum:
            - Python
            - Java
            - Ruby
            - JavaScript
          ui:
            widget: select
            
    - title: Python Configuration
      if: '{{ parameters.language === "Python" }}'
      required:
        - pythonVersion
        - pythonRequirements
      properties:
        pythonVersion:
          title: Python Version
          type: string
        pythonRequirements:
          title: Path to requirements.txt
          type: string

    - title: Java Configuration
      if: '{{ parameters.language === "Java" }}'
      required:
        - javaVersion
        - javaPackageManager
      properties:
        javaVersion:
          title: Java Version
          type: string
        javaPackageManager:
          title: Package Manager (Maven, Gradle)
          type: string

    - title: Ruby Configuration
      if: '{{ parameters.language === "Ruby" }}'
      required:
        - rubyVersion
        - rubyGemFilePath
      properties:
        rubyVersion:
          title: Ruby Version
          type: string
        rubyGemFilePath:
          title: Path to Gemfile
          type: string

    - title: JavaScript Configuration
      if: '{{ parameters.language === "JavaScript" }}'
      required:
        - jsVersion
        - jsPackageManager
      properties:
        jsVersion:
          title: JavaScript Version
          type: string
        jsPackageManager:
          title: Package Manager (npm, yarn)
          type: string


  steps:
    - id: log-selected-language
      name: Log Selected Language
      action: debug:log
      input:
        message: 'User selected language: ${{ parameters.language }}'
